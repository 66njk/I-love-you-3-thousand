# 乐高购物车业务流程

### 一、index.html 进入乐高购物网站首页

- `selectAll` 查询 `goods` 表，返回 `List<Goods>`

### 二、点击首页搜索框搜索

- `selectVague` 模糊查询 `goods` 表的 `goodsname` 字段，返回 `List<Goods>`

### 三、点击玩具商品

- 弹出玩具商品介绍浮动栏（展开玩具商品介绍信息）

### 四、点击首页登录按钮

- 跳转登录页面
  - 登录（`login` 查询 `user` 表的 `username` `password` 字段，返回提示信息，如果成功则跳转到首页 ）
  - 点击注册按钮
    - 跳转注册页面
      - 注册（`register` 查询 `user` 表的 `username` 字段，如果为空，那么添加一行 `username` `password` 记录，并返回提示信息，再跳转到登录页面）

### 五、点击首页用户名按钮

- 跳转用户信息页
  - 修改用户名密码（`updateUser` 更新 `user` 表的 `username` `password` 字段信息，修改前先查询 `selectUser`）
  - 增加/删除收货地址（`addAddress`、`deleteAddress`，之前先查询 `selectAddress`）

### 六、点击玩具商品收藏按钮

- 拦截器判断是否已经登录
  - 已登录：提示 “收藏成功”
  - 未登录：跳转登录页面

### 七、点击玩具商品购买按钮

- 拦截器判断是否已经登录
  - 已登录：跳转支付页面
    - 选择收货地址，付款
  - 未登录：跳转登录页面

### 八、点击玩具商品加入购物车按钮

- 拦截器判断是否已经登录

  - 已登录：提示 “成功加入购物车”

  - 未登录：跳转登录页面

### 九、点击首页收藏按钮

- 拦截器判断是否已经登录

  - 已登录：跳转收藏页面
    - 删除、清空

  - 未登录：跳转登录页面

### 十、点击首页购物车按钮

- 拦截器判断是否已经登录

  - 已登录：跳转购物车页面
    - 删除、清空
    - 结算（跳转支付页面）
      - 选择收货地址，付款

  - 未登录：跳转登录页面

### 十一、点击首页订单按钮

- 拦截器判断是否已经登录

  - 已登录：跳转订单页面

  - 未登录：跳转登录页面



